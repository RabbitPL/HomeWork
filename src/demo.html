<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>Hello React!</title>
    <script src="../build/react.js"></script>
    <script src="../build/react-dom.js"></script>
    <script src="../build/browser.min.js"></script>
</head>
<body>
<div id="example"></div>
<script type="text/babel">
    var Bottom = React.createClass({
        getInitialState: function () {
            console.log('Bottom-getInitialState');
            return { number: '0' };
        },

        componentDidMount: function () {
            console.log('Bottom-componentDidMount');
            setInterval(function () {
              this.setState({
                number: this.state.number + "&"
              });
            }.bind(this), 5000);
        },

        contextTypes: {
            number: React.PropTypes.string.isRequired
        },

        render: function () {
            console.log('Bottom-render');
            return <h1>{this.context.number} {this.state.number}</h1>
        }
    });

    var Middle = React.createClass({
        shouldComponentUpdate: function (nextProps, nextState, nextContext) {
            console.log('Middle-shouldComponentUpdate');
            return true;
        },

        render: function () {
            console.log('Middle-render');
            return <Bottom />;
        }
    });

    var Top = React.createClass({

        getInitialState: function () {
            console.log('Top-getInitialState');
            return { number: '0' };
        },

        componentDidMount: function () {
            console.log('Top-componentDidMount');
            setInterval(function () {
                  this.setState({
                    number: this.state.number + "@"
                  });
            }.bind(this), 1000);
        },

        shouldComponentUpdate: function (nextProps, nextState, nextContext) {
            console.log('Top-shouldComponentUpdate');
            return true;
        },
        componentDidUpdate : function(nextProps, nextState, nextContext) {
            console.log('componentDidUpdate');
        },
        componentWillReceiveProps: function(nextProps, nextState, nextContext){
            debugger;
            console.log('componentWillReceiveProps');
        },
        render: function() {
            console.log(this.props);
            console.log('Top-render');
            return (
                <div>{this.state.number}</div>
            );
        }
    });
     var Test = React.createClass({

        getInitialState: function () {
            return { age: 24 , name : ''};
        },
        componentWillReceiveProps: function(nextProps, nextState, nextContext){


            console.log('componentWillReceiveProps');
        },
        render: function() {
            return (
                <div>{this.state.age}{this.props.name}</div>
            );
        }
    });
    ReactDOM.render(<Top name='pl'/>, document.getElementById('example'));

</script>

</body>
</html>